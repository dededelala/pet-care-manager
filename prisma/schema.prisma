// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 宠物基础信息模型
model Pet {
  id          String   @id @default(cuid())
  name        String   // 宠物名字
  breed       String?  // 品种
  birthday    DateTime? // 生日
  gender      String?  // 性别 (公/母)
  color       String?  // 毛色
  photo       String?  // 照片URL
  notes       String?  // 备注
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // 关联的健康记录
  dewormingRecords      DewormingRecord[]
  internalDewormingRecords InternalDewormingRecord[]
  bathingRecords        BathingRecord[]
  vaccineRecords        VaccineRecord[]
  weightRecords         WeightRecord[]

  @@map("pets")
}

// 外驱记录模型
model DewormingRecord {
  id          String   @id @default(cuid())
  petId       String
  date        DateTime // 驱虫日期
  brand       String   // 品牌
  dosage      String   // 剂量
  nextDueDate DateTime? // 下次到期日
  notes       String?  // 备注
  createdAt   DateTime @default(now())

  pet         Pet      @relation(fields: [petId], references: [id], onDelete: Cascade)

  @@map("deworming_records")
}

// 内驱记录模型
model InternalDewormingRecord {
  id          String   @id @default(cuid())
  petId       String
  date        DateTime // 驱虫日期
  brand       String   // 品牌
  dosage      String   // 剂量
  nextDueDate DateTime? // 下次到期日
  notes       String?  // 备注
  createdAt   DateTime @default(now())

  pet         Pet      @relation(fields: [petId], references: [id], onDelete: Cascade)

  @@map("internal_deworming_records")
}

// 洗澡记录模型
model BathingRecord {
  id          String   @id @default(cuid())
  petId       String
  date        DateTime // 洗澡日期
  products    String?  // 洗护产品
  location    String?  // 洗澡地点
  notes       String?  // 备注
  createdAt   DateTime @default(now())

  pet         Pet      @relation(fields: [petId], references: [id], onDelete: Cascade)

  @@map("bathing_records")
}

// 疫苗记录模型
model VaccineRecord {
  id          String   @id @default(cuid())
  petId       String
  date        DateTime // 接种日期
  type        String   // 疫苗类型
  institution String?  // 接种机构
  nextDueDate DateTime? // 下次接种日
  notes       String?  // 备注
  createdAt   DateTime @default(now())

  pet         Pet      @relation(fields: [petId], references: [id], onDelete: Cascade)

  @@map("vaccine_records")
}

// 体重记录模型
model WeightRecord {
  id          String   @id @default(cuid())
  petId       String
  date        DateTime // 测量日期
  weight      Float    // 体重
  unit        String   @default("kg") // 单位 (kg/g)
  location    String?  // 测量地点
  notes       String?  // 备注
  createdAt   DateTime @default(now())

  pet         Pet      @relation(fields: [petId], references: [id], onDelete: Cascade)

  @@map("weight_records")
}
